dependencies:
  gem:
    - rerun
  apk:
    - less
  apt:
    - less
  custom:
    - true
    - echo "Initializing the cloud..."
  dir:
    - dirsftw
forwards:
  ftw: dirsftw
hooks:
  before:
    - touch test_hook_file
actions:
  run: crystal run ops.cr --
  run-debug: crystal run -d --error-trace ops.cr --
  run-watch:
    command: rerun -qb -p '**/*.{cr,yml,json}' -- ops run
    alias: rw
  test: crystal spec
  test-watch:
    command: rerun -qb -p '**/*.{cr,yml,json}' -- ops test
    alias: tw
  sayhi:
    command: echo 'Hello, world!'
    alias: hi
  build: crystal build ops.cr
  install: |-
    echo 1>&2 "Installing 'ops' into '$INSTALL_DIR'..."
    ops build && cp ./ops "$INSTALL_DIR"
options:
  sshkey:
    passphrase_var: SSH_KEY_PASSPHRASE
  environment:
    INSTALL_DIR: "$HOME/bin/"
